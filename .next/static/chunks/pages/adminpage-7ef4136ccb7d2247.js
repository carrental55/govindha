(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[172],{3319:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>m});var l=t(7876),a=t(4232),n=t(9099),c=t(7963);let i=(0,c.A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var d=t(9247);let r=(0,c.A)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var x=t(1907);function m(){let e=(0,n.useRouter)(),[s,t]=(0,a.useState)([]),[c,m]=(0,a.useState)(!0),[o,h]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let s=localStorage.getItem("admin_token");s&&"verified"===s?h(!0):e.push("/login")},[e]),(0,a.useEffect)(()=>{o&&(async()=>{try{let e=await fetch("/api/getBookings"),s=await e.json();e.ok&&t(s.bookings)}catch(e){console.error("Error fetching bookings:",e)}finally{m(!1)}})()},[o]);let p=(e,l)=>{let a=[...s];a[e].status=l,t(a)};if(!o||c)return(0,l.jsx)("div",{className:"flex items-center justify-center h-screen text-lg text-gray-600",children:"Loading bookings..."});if(!s.length)return(0,l.jsx)("div",{className:"flex items-center justify-center h-screen text-gray-600",children:"No bookings found in database."});let j={total:s.length,confirmed:s.filter(e=>"confirmed"===e.status).length,rejected:s.filter(e=>"rejected"===e.status).length,pending:s.filter(e=>"pending"===e.status).length};return(0,l.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:(0,l.jsxs)("div",{className:"container px-4 py-8 mx-auto max-w-7xl",children:[(0,l.jsx)("h1",{className:"mb-2 text-4xl font-bold text-slate-900",children:"Booking Management"}),(0,l.jsx)("p",{className:"mb-8 text-slate-600",children:"Manage and track all car rental bookings"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 gap-4 mb-8 md:grid-cols-3 lg:grid-cols-3",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between p-5 bg-white shadow-md rounded-xl",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-sm font-medium text-slate-600",children:"Total Bookings"}),(0,l.jsx)("div",{className:"mt-2 text-3xl font-bold text-slate-900",children:j.total})]}),(0,l.jsx)(x.A,{className:"w-5 h-5 text-blue-600"})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between p-5 bg-white shadow-md rounded-xl",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-sm font-medium text-slate-600",children:"Confirmed"}),(0,l.jsx)("div",{className:"mt-2 text-3xl font-bold text-slate-900",children:j.confirmed})]}),(0,l.jsx)(i,{className:"w-5 h-5 text-green-600"})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between p-5 bg-white shadow-md rounded-xl",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-sm font-medium text-slate-600",children:"Rejected"}),(0,l.jsx)("div",{className:"mt-2 text-3xl font-bold text-slate-900",children:j.rejected})]}),(0,l.jsx)(r,{className:"w-5 h-5 text-red-600"})]})]}),(0,l.jsxs)("div",{className:"overflow-hidden bg-white shadow-lg rounded-xl",children:[(0,l.jsx)("div",{className:"p-5 border-b",children:(0,l.jsx)("h2",{className:"text-2xl font-bold text-slate-900",children:"All Bookings"})}),(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"min-w-full text-sm text-left text-slate-700",children:[(0,l.jsx)("thead",{className:"font-semibold bg-slate-50 text-slate-900",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"px-4 py-3",children:"Customer"}),(0,l.jsx)("th",{className:"px-4 py-3",children:"Vehicle"}),(0,l.jsx)("th",{className:"px-4 py-3",children:"Rental Period"}),(0,l.jsx)("th",{className:"px-4 py-3",children:"Location"}),(0,l.jsx)("th",{className:"px-4 py-3",children:"Distance"}),(0,l.jsx)("th",{className:"px-4 py-3",children:"Amount"}),(0,l.jsx)("th",{className:"px-4 py-3",children:"Status"}),(0,l.jsx)("th",{className:"px-4 py-3",children:"Action"})]})}),(0,l.jsx)("tbody",{children:s.map((e,s)=>(0,l.jsxs)("tr",{className:"transition border-b hover:bg-slate-50",children:[(0,l.jsxs)("td",{className:"px-4 py-3",children:[(0,l.jsx)("div",{className:"font-medium text-slate-900",children:e.name}),(0,l.jsx)("div",{className:"text-xs text-slate-400",children:e.phone})]}),(0,l.jsx)("td",{className:"px-4 py-3",children:e.carName}),(0,l.jsxs)("td",{className:"px-4 py-3",children:[e.date," ",e.time]}),(0,l.jsxs)("td",{className:"px-4 py-3",children:[e.pickup," → ",e.drop]}),(0,l.jsx)("td",{className:"px-4 py-3",children:e.distance}),(0,l.jsxs)("td",{className:"px-4 py-3 font-semibold text-slate-900",children:["₹",e.price]}),(0,l.jsx)("td",{className:"px-4 py-3",children:(e=>{let s={confirmed:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800",rejected:"bg-red-100 text-red-800"},t={confirmed:(0,l.jsx)(i,{className:"w-4 h-4"}),pending:(0,l.jsx)(d.A,{className:"w-4 h-4"}),rejected:(0,l.jsx)(r,{className:"w-4 h-4"})};return(0,l.jsxs)("span",{className:"flex items-center gap-1 px-2 py-1 rounded text-xs font-medium ".concat(s[e]||s.pending),children:[t[e]||t.pending," ",(0,l.jsx)("span",{className:"capitalize",children:e||"pending"})]})})(e.status||"pending")}),(0,l.jsx)("td",{className:"flex gap-2 px-4 py-3",children:"pending"===e.status&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("button",{className:"px-2 py-1 text-white bg-green-600 rounded",onClick:()=>p(s,"confirmed"),children:"Accept"}),(0,l.jsx)("button",{className:"px-2 py-1 text-white bg-red-600 rounded",onClick:()=>p(s,"rejected"),children:"Reject"})]})})]},s))})]})})]})]})})}},6716:(e,s,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/adminpage",function(){return t(3319)}])},9099:(e,s,t)=>{e.exports=t(6296)},9247:(e,s,t)=>{"use strict";t.d(s,{A:()=>l});let l=(0,t(7963).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])}},e=>{e.O(0,[636,593,792],()=>e(e.s=6716)),_N_E=e.O()}]);